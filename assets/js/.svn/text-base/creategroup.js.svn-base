(function(){var c=YAHOO,b=c.util.Dom,a=c.util.Event;c.util.popup=function(e,f,g){var d=this;this.status="none";this.ffh=parseInt(b.getStyle(f,"height"))/2;this.w=parseInt(b.getStyle(f,"width"))/2;this.adjustPostion=function(i){var k=b.get(i);if(k){b.addClass(k,"supernatant");var j=b.getDocumentScrollTop()+(b.getViewportHeight()/2-parseInt(b.getStyle(k,"height"))/2);k.style.cssText="margin-left:-"+parseInt(b.getStyle(k,"width"))/2+"px;top:"+j+"px;"}};this.adjustBackground=function(l,k){var j=b.get("mypopupshadeDiv");if(j){var i=j.contentWindow.document;i.write("<body></body>");i.body.style.cssText="margin:0px;padding:0px;background:#000;";b.addClass(j,"bigshade");j.style.cssText="height:"+l+"px;top:"+k+"px;"}};this.createshade=function(){var i=document.getElementsByTagName("body")[0];if(!b.get("mypopupshadeDiv")){if(6==YAHOO.env.ua.ie){var h=document.createElement("iframe");h.allowtranseparency=true}else{var h=document.createElement("div");b.addClass(h,"bigshade")}h.id="mypopupshadeDiv";i.appendChild(h)}};this.ie6fn=function(){d.adjustPostion(f);d.adjustBackground(b.getViewportHeight(),b.getDocumentScrollTop())};this.hide=function(){b.addClass(f,"hidden");var i=document.getElementsByTagName("body")[0],h=b.get("mypopupshadeDiv");if(h){i.removeChild(h)}d.status="none"};return{"int":function(){this.Event(e);if(typeof g==="string"){this.close(g)}else{for(var h=0;h<g.length;h++){this.close(g[h])}}if(6==YAHOO.env.ua.ie){a.onDOMReady(function(){a.on(window,"resize",d.ie6fn);a.on(window,"scroll",d.ie6fn)})}return{hide:d.hide}},Event:function(h){var j=b.get(h),i=this;a.on(j,"click",i.trigger)},trigger:function(){b.removeClass(f,"hidden");d.createshade();if(6==YAHOO.env.ua.ie){d.status="block";d.ie6fn()}else{b.addClass(f,"supernatant");b.get(f).style.cssText="margin-left:-"+d.w+"px;margin-top:-"+d.ffh+"px"}},close:function(h){var i=b.get(h);a.on(i,"click",d.hide)},fire:function(){this["int"]();d.createshade();this["trigger"]()}}}})();(function(){var b=YAHOO,q=b.util.Dom,o=b.util.Event;if(q.get("catalogRadio")){var r=q.get("catalogRadio").value}if(q.get("public")){var s=q.get("public").name}var i=[r];var h=document.getElementsByName(s);if(q.getElementsByClassName("faction-category")[0]){var g=q.getElementsByClassName("faction-category")[0].getElementsByTagName("input")}var m={name:false,tag:false,intro:false,leimu:false,rule:false,status:false};var a={name:function(){m.name=false;if(k("faction-name",1,31)){m.name=true;return true}return false},tag:function(){m.tag=false;if(k("faction-tag",0,31)){m.tag=true;return true}return false},intro:function(){m.intro=false;if(k("faction-intro",0,201)){m.intro=true;return true}return false}};var k=function(y,z,x){var w=YAHOO.lang.trim(q.get(y).value).length;if(w>=z&&w<x){return true}return false};var j="faction-treaty";var p=function(){var y,x;out:for(y=0;y<i.length;y++){var z=document.getElementsByName(i[y]),w=z.length;for(x=0;x<w;x++){if(z[x].checked){return(m.leimu=true)}}}return(m.leimu=false)};p();var n=function(){var w;for(w=0;w<h.length;w++){if(h[w].checked){return(m.status=true)}}return(m.status=false)};var c=function(){return(q.get(j).checked=="")?m.rule=false:m.rule=true};var e=function(){var x=q.get("creat-bp");for(var w in m){if(!m[w]){return function(){x.className="ph size-l";x.disabled=true}()}}x.className="ph h size-l";x.disabled=false};var t=function(){for(var w in a){a[w]()}p();n();c();e()};var l=function(w){q.batch(q.getElementsByClassName("attention","span"),function(x){x.style.display="none"});q.batch(q.getElementsByClassName("fasten","div",w),function(x){x.style.display="none"})};var f=function(x,y,w){x.style.display="block";x.innerHTML=y;x.className=w};var v=function(w){w.style.display="none"};o.on("faction-name","focus",function(){var w=q.getNextSibling(this);v(w);l(this.parentNode);f(w,"\u8bf7\u8f93\u5165\u5e2e\u6d3e\u6807\u9898\uff0c\u957f\u5ea6\u4e0d\u8981\u8d85\u8fc730\u4e2a\u5b57\u7b26","attention")});o.on("faction-tag","focus",function(){var w=q.getNextSibling(this);v(w);l(this.parentNode);f(w,"\u6807\u7b7e\u4e2d\u95f4\u7528\u7a7a\u683c\u9694\u5f00\uff0c\u603b\u957f\u5ea6\u4e0d\u8d85\u8fc730\u4e2a\u5b57\u7b26","attention")});o.on("faction-intro","focus",function(){var w=q.getNextSibling(this);v(w);l(this.parentNode);f(w,"\u8bf7\u8f93\u5165\u5e2e\u6d3e\u7684\u4e00\u4e9b\u4ecb\u7ecd\u8bf4\u660e\u6587\u5b57\uff0c\u4e0d\u8981\u8d85\u8fc7200\u4e2a\u5b57\u7b26","attention")});o.on("faction-name","keyup",function(){var w=q.getNextSibling(this);v(w);if(!a.name()){f(w,"\u5e2e\u6d3e\u540d\u79f0\u4e0d\u80fd\u4e3a0\u6216\u8005\u8d85\u8fc730\u4e2a\u5b57\u7b26","error")}t()});o.on("faction-tag","keyup",function(){var w=q.getNextSibling(this);v(w);if(!a.tag()){f(w,"\u5e2e\u6d3e\u6807\u7b7e\u4e0d\u80fd\u4e3a0\u6216\u8005\u8d85\u8fc730\u4e2a\u5b57\u7b26","error")}t()});o.on("faction-intro","keyup",function(){var w=q.getNextSibling(this);v(w);if(!a.intro()){f(w,"\u5e2e\u6d3e\u4ecb\u7ecd\u4e0d\u80fd\u4e3a0\u6216\u8005\u8d85\u8fc7200\u4e2a\u5b57\u7b26","error")}t()});o.on(g,"click",function(){var w=q.get("msgcategory");p();if(m.leimu){v(w)}t()});o.on(j,"click",function(){var w=q.get("msgcategory");if(!m.leimu){f(w,"\u5e2e\u6d3e\u7c7b\u76ee\u81f3\u5c11\u8981\u9009\u62e9\u4e00\u4e2a","error")}t()});o.on(h,"click",function(){t()});o.on("privacy","click",function(){q.get("status-2").style.display="block"});o.on(["public","semi"],"click",function(){q.get("status-2").style.display="none";q.get("status-2").getElementsByTagName("input")[0].checked=false});var u=new b.util.popup("creat-bp","popup-msg","popup-msg-close");u["int"]();var d=function(){var z=function(C,B){q.get(B).innerHTML=C};var x=["J_ExtractTitle","J_ExtractCategory","J_ExtractClassify","J_ExtractStatus","J_ExtractState","J_ExtractTags"];var w={title:q.get("faction-name").value,_getcate:function(){var G=q.getElementsByClassName("faction-category")[0].getElementsByTagName("input");for(var C=0;C<G.length;C++){if(G[C].checked){var E=G[C];var F=q.getNextSibling(E).innerHTML;var B=q.getAncestorByTagName(E,"dl");var D=q.getFirstChild(B).innerHTML;return{classif:F,category:D}}}}(),_getstatus:function(){var E=["privacy","public","semi"];for(var C=0;C<E.length;C++){if(q.get(E[C]).checked){var B=q.getNextSibling(E[C]);var D=q.getNextSibling(B);return{status:B.innerHTML,state:" ("+D.innerHTML+")"}}}}(),tags:function(){var B=q.get("faction-tag").value;var C=B.split(/\s|,/);return C.join(",")}()};var A=[w.title,w._getcate["category"],w._getcate["classif"],w._getstatus["status"],w._getstatus["state"],w.tags];for(var y=0;y<x.length;y++){z(A[y],x[y])}};o.on("creat-bp","click",d)})();
