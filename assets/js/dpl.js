(function(){var c=YAHOO,b=c.util.Dom,a=c.util.Event;TB.namespace("BPGraphPic");TB.BPGraphPic=function(e,f,d){this.imgID=e;this.minH=f;this.minW=d;this.img=b.get(e)};TB.BPGraphPic.load=false;TB.BPGraphPic.prototype={_EquipCropper:function(){var d=this,g=d.img.offsetHeight,e=d.img.offsetWidth;if(g<=d.minH&&e<=d.minW){return null}var j=d.minH,f=d.minW,l=d.minH,i=d.minW;if(g<=d.minH||e<=d.minW){j=j=l=i=Math.min(g,e)}var k={initialXY:[0,0],minHeight:j,minWidth:j,initHeight:l,initWidth:i,status:false,ratio:true,shiftKeyTick:10};return new YAHOO.widget.ImageCropper(d.imgID,k)},GetCropper:function(){var e=this;var f={require:["imagecropper"],loadOptional:true,onSuccess:function(){TB.BPGraphPic.load=true;TB.BPGraphPic.Crop=e._EquipCropper()},timeout:10000,combine:true};if(!TB.BPGraphPic.load){var d=new YAHOO.util.YUILoader(f);d.insert()}else{e.img.onload=function(){TB.BPGraphPic.Crop=e._EquipCropper()}}},TBBPpreview:function(k,i,f){var d=this,g=d.img.offsetHeight,e=d.img.offsetWidth;var j=function(){var m=k.getCropCoords(),h=m.height,o=m.width,r=m.top,t=m.left,s=(g*d.minH)/h,l=(e*d.minH)/o,n=(s*r)/g,q=(l*t)/e;for(var p=0;p<i.length;p++){b.get(i[p]).style.cssText="height:"+s/(p+1)+"px;width:"+l/(p+1)+"px;top:-"+n/(p+1)+"px;left:-"+q/(p+1)+"px"}f(m)};j();k.on("moveEvent",j);k.on("resizeEvent",j);k._resize.on("endResize",function(){var l=arguments[0];if(l.width!=l.height){var h=Math.min(l.width,l.height);this.resize(null,h,h,0,0);if(!bugfix){bugfix=this.on("dragEvent",function(){imgCrop._setConstraints(true)})||true}}})}}})();(function(){var c=YAHOO,b=c.util.Dom,a=c.util.Event;TB.namespace("CheckAllBox");TB.CheckAllBox=function(f,d){var g=function(){var i=this.checked;b.batch(d,function(j){j.checked=i})};var h;var e=function(){var k=0;for(var j=0;j<d.length;j++){if(!d[j].checked){h=false;break}else{k++}}if(k==d.length){h=true}b.get(f).checked=h};a.on(f,"click",g);a.on(d,"click",e)}})();(function(){var c=YAHOO,b=c.util.Dom,a=c.util.Event;TB.namespace("CheckFileType");TB.CheckFileType=function(g,f){var e=g.lastIndexOf("."),h=g.substring(e+1,g.length).toLowerCase();for(var d=0;d<f.length;d++){if(h==f[d]){return true}}return false}})();(function(){var c=YAHOO,b=c.util.Dom,a=c.util.Event;TB.namespace("CheckLG");TB.CheckLG=function(){return LG=TB.bom.getCookie("uc1").toQueryParams()["cookie15"]&&TB.bom.getCookie("_nk_")!=undefined?true:false}})();(function(){YAHOO.namespace("util.Command.Behavior");var d=YAHOO.util,e=d.Dom,i=d.Event,h=d.Command.Behavior;var g="none",f="false",a="block",j="0",c="hidden",b="";YAHOO.util.Command.init=function(m){var l={func:function(){},preventDefault:true,target:null,filter:function(){return true},getTarget:function(){},extraFunc:function(){},beforeEnd:function(){}},k=YAHOO.lang.merge(l,m||{});return function(p){var n,o;n=p.target||p.srcElement;if(k.filter(n)){o=k.target||k.getTarget(n)||n;if(!(k.preventDefault===f)){i.preventDefault(p)}k.func(o,k.extraFunc)}k.beforeEnd()}};h.hide=function(l,k){return e.batch(l,h._hide,k)};h._hide=function(l,k){if(e.getStyle(l,"display")!=g){e.setStyle(l,"display",g)}if(k){k(l)}};h.show=function(l,k){return e.batch(l,h._show,k)};h._show=function(l,k){if(e.getStyle(l,"display")==g){e.setStyle(l,"display",a)}if(k){k(l)}};h.toggleHide=function(l,k){return e.batch(l,h._toggleHide,k)};h._toggleHide=function(l,k){if(e.getStyle(l,"display")!=g){e.setStyle(l,"display",g)}else{e.setStyle(l,"display",a)}if(k){k(l)}};h.fold=function(l,k){return e.batch(l,h._fold,k)};h._fold=function(l,k){if(parseInt(e.getStyle(l,"height"))!=parseInt(j)){e.setStyle(l,"height",j);e.setStyle(l,"overflow",c)}if(k){k(l)}};h.unfold=function(l,k){return e.batch(l,h._unfold,k)};h._unfold=function(l,k){if(parseInt(e.getStyle(l,"height"))==parseInt(j)){e.setStyle(l,"height",b);e.setStyle(l,"overflow",b)}if(k){k(l)}};h.toggleFold=function(l,k){return e.batch(l,h._toggleFold,k)};h._toggleFold=function(l,k){if(parseInt(e.getStyle(l,"height"))!=parseInt(j)){e.setStyle(l,"height",j);e.setStyle(l,"overflow",c)}else{e.setStyle(l,"height",b);e.setStyle(l,"overflow",b)}if(k){k(l)}};d.Command.NodeWrapper=function(m){var l={template:"",data:[],container:null},k=YAHOO.lang.merge(l,m||{});this.template=k.template;this.data=k.data;this.container=k.container;this.source=this.container.innerHTML;this.init()};d.Command.NodeWrapper.prototype={render:function(){var k=[];for(var n=0,m=this.data.length;n<m;n++){if(!this.data[n]){continue}k.push(YAHOO.lang.substitute(this.template,this.data[n]))}this.container.innerHTML=k.join("")},parse:function(){},init:function(){this.parse();this.render()}}})();(function(){var b=YAHOO.util,c=b.Dom,a=b.Event,d=b.Command.Behavior;a.onDOMReady(function(){var f="click";var e=c.getElementsByClassName("sidebar","div");if(e){a.addListener(e,f,b.Command.init({func:function(g){if(c.hasClass(g,"folding")){c.removeClass(g,"folding")}else{c.addClass(g,"folding")}},filter:function(g){return c.hasClass(g,"trigger")},getTarget:function(g){return c.getAncestorByClassName(g,"folder")}}))}});a.onDOMReady(function(){var f="click";var e=c.getElementsByClassName("msg","div");if(e){a.addListener(e,f,b.Command.init({func:d.hide,filter:function(g){return c.hasClass(g,"trigger")},getTarget:function(g){return c.getAncestorByClassName(g,"msg")}}))}});a.onDOMReady(function(){if(c.get("J_ContentTab")){TB.widget.SimpleTab.decorate("J_ContentTab",{eventType:"click",currentClass:"current",tabClass:"J_tab",tabPanelClass:"tab-panel",autoSwitchToFirst:true,stopEvent:true})}})})();(function(){var c=YAHOO,b=c.util.Dom,a=c.util.Event;TB.namespace("CopyToClipboard");TB.CopyToClipboard=function(f){try{if(window.clipboardData){window.clipboardData.clearData();window.clipboardData.setData("Text",f);alert("成功复制链接到剪切板，可以进行Ctrl+V粘贴")}else{if(navigator.userAgent.indexOf("Opera")!=-1){window.location=f}else{if(window.netscape){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")}catch(j){window.prompt("被浏览器拒绝！请在浏览器地址栏输入'about:config'并回车\n然后将'signed.applets.codebase_principal_support'设置为'true'\n请手动复制下方链接然后粘贴到您的聊天工具或论坛、博客中去！",f)}var h=Components.classes["@mozilla.org/widget/clipboard;1"].createInstance(Components.interfaces.nsIClipboard);if(!h){return}var g=Components.classes["@mozilla.org/widget/transferable;1"].createInstance(Components.interfaces.nsITransferable);if(!g){return}g.addDataFlavor("text/unicode");var k=new Object(),d=new Object(),k=Components.classes["@mozilla.org/supports-string;1"].createInstance(Components.interfaces.nsISupportsString);var l=f;k.data=l;g.setTransferData("text/unicode",k,l.length*2);var i=Components.interfaces.nsIClipboard;if(!h){return false}h.setData(g,null,i.kGlobalClipboard);alert("成功复制链接到剪切板，可以进行Ctrl+V粘贴")}else{window.prompt("您的浏览器不支持自动复制，请手动复制下方链接\n然后粘贴到您的聊天工具或论坛、博客中去！",f)}}}}catch(j){}}})();(function(){var c=YAHOO,b=c.util.Dom,a=c.util.Event;TB.namespace("Customlabel");TB.Customlabel=function(f,d){var e=0;for(;e<d.length;e++){(function(g){a.on(d[g],"click",function(){f[g].checked=!f[g].checked?true:false})})(e);a.on(f[e],"click",function(g){a.stopPropagation(g)})}}})();(function(){var c=YAHOO,b=c.util.Dom,a=c.util.Event;TB.namespace("MouseWheel");TB.MouseWheel=function(h){var d={sBGElId:"",sHandleElId:"",iUp:0,iDown:"",iTickSize:"",Direction:"vertical",Maxheight:"",Mousepx:50,DivTop:0,callback:function(){}};YAHOO.lang.augmentObject(d,h,true);d.ScrollHeght=b.get(d.sBGElId).scrollHeight;var g={mousewheel:function(j,i){if(document.addEventListener){document.getElementById(j).addEventListener("DOMMouseScroll",i,false)}document.getElementById(j).onmousewheel=i},mousefunc:function(j,i){var k=g.direction(j);if(k>0){g.wheelup(i)}else{g.wheeldown(i)}a.stopEvent(j)},direction:function(i){var j=0;if(i.wheelDelta){j=i.wheelDelta>0?1:-1}else{if(i.detail){j=i.detail<0?1:-1}}return j},wheelup:function(j){d.DivTop=d.DivTop-d.Mousepx;var i=d.DivTop*d.Maxheight/d.ScrollHeght;j.setValue(i);if(d.DivTop<0){d.DivTop=0}},wheeldown:function(j){d.DivTop=d.DivTop+d.Mousepx;var i=d.DivTop*d.Maxheight/d.ScrollHeght;j.setValue(i);if(d.DivTop>d.ScrollHeght){d.DivTop=d.ScrollHeght}}};var f=b.get(d.sBGElId);var e=b.getFirstChild(f).offsetHeight;return function(){if(d.ScrollHeght>d.Maxheight){var i=YAHOO.widget.Slider.getVertSlider(d.sBGElId,d.sHandleElId,d.iUp,d.iDown,d.iTickSize);i.backgroundEnabled=false;i.subscribe("change",function(j){d.DivTop=j*(d.ScrollHeght/d.Maxheight);if(j==d.iDown){b.get(d.sBGElId).scrollTop=d.ScrollHeght}else{b.get(d.sBGElId).scrollTop=d.DivTop}});g.mousewheel(d.sBGElId,function(j){j=j||window.event;g.mousefunc(j,i)});d.callback(e);return i}else{d.callback(e)}}()}})();(function(){var c=YAHOO,b=c.util.Dom,a=c.util.Event;TB.namespace("popup");TB.popup=function(f,h,d){var e=this;this.trigger=f;this.target=h;this.closebtn=d;this._offsettop=parseInt(b.getStyle(this.target,"height"))/2;this._offsetleft=parseInt(b.getStyle(this.target,"width"))/2;var i={Target:function(){b.removeClass(e.target,"hidden");i.Createshade();if(6==YAHOO.env.ua.ie){i.Ie6fn()}else{b.addClass(e.target,"supernatant");if(YAHOO.env.ua.opera){var k=parseInt(b.getStyle(e.target,"height"))/2,j=parseInt(b.getStyle(e.target,"width"))/2;b.get(e.target).style.cssText="margin-left:-"+j+"px;margin-top:-"+k+"px"}else{b.get(e.target).style.cssText="margin-left:-"+e._offsetleft+"px;margin-top:-"+e._offsettop+"px"}}},Trigger:function(j){var k=b.get(j);a.on(k,"click",i.Target)},Createshade:function(){if(!b.get("mypopupshadeDiv")){if(6==YAHOO.env.ua.ie){var j=document.createElement("iframe");j.allowtranseparency=true;j.src="about:blank"}else{var j=document.createElement("div");b.addClass(j,"bigshade")}j.id="mypopupshadeDiv";document.body.appendChild(j)}},Hide:function(){b.addClass(e.target,"hidden");var j=document.getElementById("mypopupshadeDiv");if(j){j.parentNode.removeChild(j)}},Ie6fn:function(){i.AdjustPostion(e.target,e._offsetleft);i.AdjustBackground(b.getViewportHeight(),b.getDocumentScrollTop())},AdjustPostion:function(l,k){var l=b.get(l);if(l){b.addClass(l,"supernatant");var j=b.getDocumentScrollTop()+(b.getViewportHeight()/2-e._offsetleft);l.style.cssText="margin-left:-"+k+"px;top:"+j+"px;"}},AdjustBackground:function(j,m){var l=b.get("mypopupshadeDiv");if(l){var k=l.contentWindow.document;if(!k.body){k.designMode="On";k.contentEditable=true;k.open();k.writeln('<body style="margin:0px;padding:0px;background:#000;"></body>');k.close()}b.addClass(l,"bigshade");l.style.cssText="height:"+j+"px;top:"+m+"px;"}}};var g={"int":function(){var j={hide:i.Hide};i.Trigger(e.trigger);if(typeof e.closebtn==="string"){g.close(e.closebtn)}else{for(var k=0;k<e.closebtn.length;k++){g.close(e.closebtn[k])}}if(6==YAHOO.env.ua.ie){a.onDOMReady(function(){a.on(window,"resize",i.Ie6fn);a.on(window,"scroll",i.Ie6fn)})}return j},close:function(j){var k=b.get(j);a.on(k,"click",i.Hide)},fire:function(){g["int"]();i.Createshade();i.Target()}};return g};YAHOO.util.popup=TB.popup})();(function(){var d=YAHOO,c=d.util.Dom,b=d.util.Event,a=document;TB.namespace("checknum");TB.checknum=function(e,f){var g=0;c.batch(e,function(h){if(h.checked){g++}});if(g>=f){c.batch(e,function(h){if(!h.checked){h.disabled=true;b.removeListener(h.parentNode.getElementsByTagName("label")[0])}})}else{c.batch(e,function(h){if(h.disabled){TB.Customlabel([h],[h.parentNode.getElementsByTagName("label")[0]]);b.on(h.parentNode.getElementsByTagName("label")[0],"click",function(){TB.checknum(e,f)});h.disabled=false}})}}})();(function(){var c=YAHOO,b=c.util.Dom,a=c.util.Event;TB.namespace("iehover");TB.iehover=function(d,f){if(YAHOO.env.ua.ie==6){var e=b.getElementsByClassName(d);a.on(e,"mouseover",function(){b.addClass(this,f)});a.on(e,"mouseout",function(){b.removeClass(this,f)})}}})();(function(){var c=YAHOO,b=c.util.Dom,a=c.util.Event;TB.namespace("listenCallback");TB.listenBack=function(e,d){setTimeout(function(){if(e()){d()}else{TB.listenBack(e,d)}},200)}})();(function(){var c=YAHOO,b=c.util.Dom,a=c.util.Event;TB.namespace("wordcountdown");TB.wordcountdown.bind=function(g,i,d){var f=b.hasClass(g,"tb-input-hint")?d-c.lang.trim(b.get(g).value).length+b.get(g).title.length:d-c.lang.trim(b.get(g).value).length;var h=b.getAncestorByTagName(b.get(i),"span");b.get(i).innerHTML=f;var e=function(){var j=b.hasClass(g,"tb-input-hint")?d-c.lang.trim(b.get(g).value).length+b.get(g).title.length:d-c.lang.trim(b.get(g).value).length;h.innerHTML=j>=0?'还能输入<em id="J_Bpnum">'+j+"</em>个字":'您的输入已超出<em id="J_Bpnum" class="cause">'+d+"</em>个字"};e();a.on(g,"keyup",e)}})();