(function(){if(!TB.voteImage){TB.namespace("voteImageDetail")}TB.voteImageDetail.vote=(function(){var c=YAHOO.util.Dom,b=YAHOO.util.Event,a={check:function(g,e,d){this.id=g;var f=c.get(g).getElementsByTagName("input");b.on(f,"click",function(){var j=0;for(var h=0;h<f.length;h++){f[h].checked&&j++}if(j>e){this.checked=false;alert("\u6700\u591a\u53ea\u80fd\u9009\u62e9"+e+"\u9879");return}});a.create(d)},create:function(d){var e=document.createElement("div");e.id="J_PopUpMask_4";e.className="pop-up";e.innerHTML='<div class=\'hd\'><h3 id=\'J_title\'></h3></div><div class="bd"><div class="inner"><iframe id="J_PopUpFrame_4" class="pop-mask" src="" scrolling="no" frameborder="0"></iframe></div></div><p class="ft"><a href="#" class="j_close act"  id=\'close4\'>\u5173\u95ed</a></p>';document.body.appendChild(e);c.setStyle(e,"display","none");var f=c.getElementsByClassName("j_close");b.on(f,"click",function(g){c.setStyle(e,"display","none");b.stopEvent(g);if(c.get("J_submit")){c.get("J_submit").disabled=false}});a.status(d)},ischeck:function(){var e=c.get(this.id).getElementsByTagName("input");for(var d=0;d<e.length;d++){if(e[d].checked==true){return false}}return true},status:function(d){b.on("J_submit","click",function(f){b.stopEvent(f);if(a.ischeck()){alert("\u55e8\uff0c\u4f60\u5230\u5e95\u6295\u7968\u7ed9\u54ea\u4e00\u9879\u5440\uff1f");return}c.get("J_PopUpFrame_4").src=a.voteUrl(d);c.get("J_submit").disabled=true;setTimeout(function(){c.get("J_PopUpMask_4").style.display="block"},500);if(c.hasClass("J_PopUpFrame_4","msg24")){setTimeout(function(){c.setStyle("J_PopUpMask_4","display","none")},3000)}})},voteUrl:function(d){var e=c.get("choiceForm");var f=d;f=f+"?threadId="+e.threadId.value;f=f+"&groupId="+e.groupId.value;for(i=0;i<e.choice.length;i++){if(e.choice[i].checked){f=f+"&choice="+e.choice[i].value}}f=f+"&tbToken="+encodeURIComponent(e.tbToken.value);return f}};return a})()})();
