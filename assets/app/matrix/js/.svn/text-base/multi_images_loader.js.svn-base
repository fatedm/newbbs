var MIL={};MIL.util={};MIL.impl={};MIL.debug=false;MIL.sysImageSize=[30,40,60,120];MIL.loadByUID=function(a,c){var b=MIL.impl.doms2Ids(c);if(!b||b.length===0){return}return MIL.load(a,b)};MIL.load=function(b,c){var a=MIL.impl.createQueryData(c);MIL.impl.loadFromServer(b,a,MIL.impl.onSuccessFun)};MIL.impl.doms2Ids=function(e){if(MIL.util.isEmpty(e)||(!e.length)){return null}var a=new Array();for(var c=0;c<e.length;++c){var d=e[c];var b=d.getAttribute("uid");if(MIL.util.isNotEmpty(b)){a.push(b)}}return a};MIL.impl.createQueryData=function(b){var a=YAHOO.lang.JSON.stringify(b);return"ids="+a};MIL.impl.loadFromServer=function(b,a,d){var c={success:d,failure:function(){MIL.util.msg("connect failed!")}};MIL.util.msg(b);MIL.util.msg(a);YAHOO.util.Connect.asyncRequest("POST",b,c,a)};MIL.impl.onSuccessFun=function(d){var b=d.responseText;var a=null;try{a=YAHOO.lang.JSON.parse(b)}catch(c){MIL.util.msg("parse json data failed!");return}MIL.impl.updateImages(a)};MIL.impl.updateImages=function(a){for(var e=0;e<a.length;++e){var d=a[e].id;var c=a[e].url;var f=MIL.impl.createFilterString(d);var b=YAHOO.util.Selector.query(f);MIL.impl.setImagesSrc(b,c)}};MIL.impl.createFilterString=function(a){return"img[uid="+a+"]"};MIL.impl.setImagesSrc=function(a,c){if(MIL.util.isEmpty(a)||(!a.length)){return}for(var d=0;d<a.length;++d){var e=a[d];var b=c;var f=e.getAttribute("imageSize");b=MIL.impl.appendImageSize(b,f);e.src=b}};MIL.impl.appendImageSize=function(a,b){if(MIL.util.isEmpty(a)){return null}if(MIL.util.isEmpty(b)){return a}if(MIL.impl.isSysImageUrl(a)){return a}return a+"_"+b+".jpg"};MIL.impl.isSysImageUrl=function(c){var a=c.lastIndexOf("/");var f=c.lastIndexOf(".");var e=c.substring(a+1,f);if(isNaN(e)){return false}var b=parseInt(e,10);for(var d=0;d<MIL.sysImageSize.length;++d){if(b==MIL.sysImageSize[d]){return true}}return false};MIL.util.isEmpty=function(a){if(a===null||(typeof a=="undefined")||a==""){return true}return false};MIL.util.isNotEmpty=function(a){return !MIL.util.isEmpty(a)};MIL.util.msg=function(a){if(MIL.debug){window.alert(a)}};
