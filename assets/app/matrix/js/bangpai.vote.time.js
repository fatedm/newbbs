 (function(){var b=YAHOO.util.Dom,r=YAHOO.util.Event;var q=b.get("j_time").getElementsByTagName("select");var o=q[0],e=q[1],g=q[2],l=q[3];var j=new Date(),p=j.getFullYear(),c=j.getMonth()+1,n=j.getDate(),i=j.getHours();var f=0;var a={isLeapYear:function(d){return(0==d%4&&((d%100!=0)||(d%400==0)))},getK:function(d,h){if(this.isLeapYear(h)&&d==2){f=29}else{if(d==2){f=28}else{if(d==1||d==3||d==5||d==7||d==8||d==10||d==12){f=31}else{f=30}}}return f},setYear:function(){o.options[0]=new Option(p,p);o.options[1]=new Option(p+1,p+1)},yearchange:function(){if(this.value!=0){if(q[0].value==p){q[1].options.length=0;for(var d=c;d<13;d++){q[1].options.add(new Option(d,d))}}else{q[1].options.length=0;for(var d=1;d<13;d++){q[1].options.add(new Option(d,d))}}}},yuechang:function(){if(this.value!=0){if(o.value==p&&e.value==c){g.options.length=0;for(var d=n;d<a.getK(e.value,o.value)+1;d++){g.options.add(new Option(d,d))}}else{g.options.length=0;for(var d=1;d<a.getK(e.value,o.value)+1;d++){g.options.add(new Option(d,d))}}}},daychange:function(){var d=this;if(this.value!=0){if(g.value==n&&o.value==p&&e.value==c){l.options.length=0;for(var h=i+1;h<24;h++){l.options.add(new Option(h+"\u65f6",h))}}else{l.options.length=0;for(var h=0;h<24;h++){l.options.add(new Option(h+"\u65f6",h))}}}},bind:function(){var d=this;r.on(o,"change",function(){d.yearchange();d.yuechang();d.daychange()});r.on(e,"change",function(){d.yuechang();d.daychange()});r.on(g,"change",function(){d.daychange()})},init:function(){this.bind();this.setYear();this.yearchange();this.yuechang();this.daychange();o.value=o.options[0].value;var k=this.getK(e.value,o.value);var h=n+15;if(h>k){h=h-k;if(c+1<13){e.value=c+1}else{o.value=o.options[1].value;this.yearchange();e.value=1}this.yuechang();g.value=h;this.daychange()}else{this.yearchange();this.yuechang();l.options.length=0;for(var d=0;d<24;d++){l.options.add(new Option(d+"\u65f6",d))}g.value=n+15;l.value=i+1}}};a.init()})();
